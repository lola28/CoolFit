<p id="notice"><%= notice %></p>

<div class="index-container">

  <div class="cards-index">
    <% @activities.each do |activity| %>

      <%= link_to activity do %>
        <div class="card-index zoom d-flex justify-content-between">
          <div class="card-index-img">
            <% if activity.photo_db.nil? %>
              <%= cl_image_tag activity.photo_user, class: "card-index-img" %>
            <% else %>
              <%= image_tag activity.photo_db, class: "card-index-img" %>
            <% end %>
          </div>

          <div class="card-index-infos">
            <div class="card-index-text">
              <h3><%= activity.name %></h3>
              <p class="avatar-name">
                <%= activity.owner.username %>
              </p>
              <p class="avatar-name"><%= render 'shared/avatar_small', activity: activity %></p>
              <p class="card-index-benef"><%=activity.healths.map(&:description).join(' / ') %></p>
              <% end %>
            </div>
          </div>

          <div class="card-index-tags">
              <div class="interest-index">
                <% if activity.owner != current_user %>
                  <% if @user_interests.select{ |interest| interest.activity == activity } == [] %>
                    <%= link_to "♡", activity_interests_path(activity), method: :post,  class: "interest-btn" %>
                  <% else %>
                    <%= link_to "♥", activity_interest_path(activity), method: :delete,  class: "interest-btn-selected" %>
                  <% end %>
                <% end %>
              </div>
              <br>
              <div class="card-btn-index">
                <%= link_to "Register", activity_booking_path(activity), method: :post, remote: true, class: 'btn register-btn' %>
              </div>
            </div>
        </div>
    <% end %>
  </div>

  <div
    id="map"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    class="map"
  >
  </div>

</div>
